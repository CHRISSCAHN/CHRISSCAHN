<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>CHANCHAN Shop</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="#!">CHANCHAN SARI- SARI STORE</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#!">About</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Shop</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown" id="drop">
                            <li><a class="dropdown-item" href="#" onclick="change(event);" data-value="all">All
                                    Products</a></li>
                            <li>
                                <hr class="dropdown-divider" />
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);" data-value="smartphones">Tech
                                    Gadgets</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);"
                                    data-value="mens-shirts">Men</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);"
                                    data-value="womens-dresses">Women</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);" data-value="skin-care">Skin
                                    Care</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);"
                                    data-value="sports-accessories">Sports accessories</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);"
                                    data-value="laptops">Laptop</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);"
                                    data-value="womens-shoes">Women's footwear</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);" data-value="mens-shoes">Men's
                                    Shoes</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="change(event);"
                                    data-value="womens-jewellery">
                                    Accessories</a>
                            </li>
                        </ul>
                    </li>
                </ul>

                <form class="d-flex me-2 position-relative" role="search" id="searchForm">
                    <input class="form-control me-2" type="search" id="search" placeholder="Search" aria-label="Search"
                        oninput="getProd()">
                    <button class="btn btn-outline-dark" id="submit" type="button" onclick="getProd();"
                        style="cursor: pointer;">Search</button>

                    <!-- Dropdown for suggestions -->
                    <div id="suggestions" class="dropdown-menu" style="display: none;"></div>
                </form>

                <!-- Cart Button -->
                <form class="d-flex">
                    <a href="cart.html">
                        <button class="btn btn-outline-dark" type="button">
                            <i class="bi-cart-fill me-1"></i>
                            Cart
                            <span class="badge bg-dark text-white ms-1 rounded-pill">0</span>
                        </button>
                    </a>
                </form>
            </div>
        </div>
    </nav>

    <!-- Header-->

    <!-- Section-->
    <section class="py-5">
        <div class="container px-4 px-lg-5 mt-5">
            <h2 class="fw-bolder mb-4" id="related" style="text-transform: capitalize;">Related products</h2>

            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center" id="con1">


            </div>
        </div>
    </section>

    <footer class="footer position-relative light-background">

        <div class="container footer-top">
            <div class="row gy-4">
                <div class="col-lg-5 col-md-12 footer-about">
                    <a href="index.html" class="logo d-flex align-items-center">
                        <span class="sitename">CHANCHAN</span>
                    </a>
                    <p>Explore the beauty and culture of Italy. From the ancient ruins of Rome to the romantic canals of
                        Venice, our mission is to showcase the incredible destinations and experiences that Italy has to
                        offer.</p>
                    <div class="social-links d-flex mt-4">
                        <a href="https://twitter.com" target="_blank"><i class="bi bi-twitter"></i></a>
                        <a href="https://facebook.com" target="_blank"><i class="bi bi-facebook"></i></a>
                        <a href="https://instagram.com" target="_blank"><i class="bi bi-instagram"></i></a>
                        <a href="https://linkedin.com" target="_blank"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Discover Italy</a></li>
                        <li><a href="#">Travel Guides</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Our Services</h4>
                    <ul>
                        <li><a href="#">Travel Planning</a></li>
                        <li><a href="#">Culinary Tours</a></li>
                        <li><a href="#">Cultural Experiences</a></li>
                        <li><a href="#">Accommodation Booking</a></li>
                        <li><a href="#">Guided Tours</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
                    <h4>Contact Us</h4>
                    <p>Piazza di Spagna, 1</p>
                    <p>Rome, RM 00187</p>
                    <p>Italy</p>
                    <p class="mt-4"><strong>Phone:</strong> <span>+39 06 12345678</span></p>
                    <p><strong>Email:</strong> <span>info@italytravel.com</span></p>
                </div>

            </div>
        </div>

        <div class="container copyright text-center mt-4">
            <p>Â© <span>Copyright</span> <strong class="sitename">CHANCHAN</strong> <span>All Rights Reserved</span>
            </p>
            <div class="credits">
                Designed by <a href="https://www.facebook.com/tiantiannzz">CHANCHAN</a>
            </div>
        </div>

    </footer>
    <script>
        const categoryColors = {
            "beauty": "#FFB6C1",             
            "fragrances": "#FFDAB9",
            "furniture": "#8B4513",          
            "groceries": "#32CD32",        
            "home-decoration": "#A0522D",   
            "kitchen-accessories": "#FFD700", 
            "laptops": "#4682B4",             
            "mens-shirts": "#1E90FF",       
            "mens-shoes": "#00008B",         
            "mens-watches": "#708090",        
            "mobile-accessories": "#8A2BE2",  
            "motorcycle": "#2F4F4F",          
            "skin-care": "#FFDEAD",           
            "smartphones": "#0073e6",         
            "sports-accessories": "#FF4500", 
            "sunglasses": "#4682B4",          
            "tablets": "#5F9EA0",             
            "tops": "#FF6347",              
            "vehicle": "#000000",             
            "womens-bags": "#B03060",        
            "womens-dresses": "#FF69B4",      
            "womens-jewellery": "#DAA520",  
            "womens-shoes": "#8B0000",       
            "womens-watches": "#FFD700"
        };

        const getProd = async () => {
            var search = document.getElementById("search").value;

            try {
                var response = await fetch('https://dummyjson.com/products/search?q=' + search);
                var data = await response.json();


                var container = document.getElementById("con1");
                container.innerHTML = '';

                if (data.products && data.products.length > 0) {
                    for (var i = 0; i < data.products.length; i++) {
                        var imageUrl = data.products[i].images.length > 0 ? data.products[i].images[0] : 'images/default.jpg';
                        var rating = Math.round(data.products[i].rating);
                        const bgColor = categoryColors[data.products[i].category] || '#ffffff';
                        var stars = '';
                        for (let j = 1; j <= 5; j++) {
                            if (j <= rating) {
                                stars += '<span class="text-warning">&#9733;</span>';
                            } else {
                                stars += '<span class="text-warning">&#9734;</span>';
                            }
                        }
                        document.getElementById("related").innerHTML = `${data.products[i].category}`;
                        container.innerHTML += `
                            <div class="col mb-5">
                                <div class="card h-100">
                                    <div class="card-img-container" style="height: 200px; background-color: ` + bgColor + `; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                                        <img class="card-img-top img-fluid" src="` + imageUrl + `" alt="` + data.products[i].id + `" onerror="this.onerror=null;this.src='images/default.jpg';" style="height: 100%; width: auto; object-fit: contain;" />
                                    </div>
                                    <div class="card-body p-4 text-center">
                                        <h5 class="fw-bolder">` + data.products[i].title + `</h5>
                                        <p> $` + data.products[i].price + `</p>
                                    </div>
                                    <div class="card-footer p-4 bg-transparent border-top-0 text-center">
                                        <a class="btn btn-dark mt-auto" href="product.html?id=` + data.products[i].id + `">Quick View</a>
                                    </div>
                                    <div class="card-header text-center">
                                    <div class="star-rating">
                                        ${stars}
                                    </div>
                                </div>
                                </div>
                            </div>`;
                    }
                } else {
                    container.innerHTML = "<p>No search results found</p>";
                }
            } catch (error) {
                console.error('Error fetching products:', error);
                container.innerHTML = "<p>Error fetching products. Please try again later.</p>";
            }
        };


        async function change(event) {
            if (!event || !event.target) {
                console.error('Event or target not available');
                return;
            }

            var drop = event.target.getAttribute('data-value');
            let category;

            try {
                const res = await fetch('https://dummyjson.com/products/category/' + drop);
                const data = await res.json();
                category = data.products;

                console.log(category);

                document.getElementById("related").innerHTML = `${drop}`;
                var container = document.getElementById("con1");
                container.innerHTML = '';


                for (var i = 0; i < category.length; i++) {
                    var imageUrl = category[i].images.length > 0 ? category[i].images[0] : 'images/default.jpg';
                    var rating = Math.round(data.products[i].rating);
                    const bgColor = categoryColors[data.products[i].category] || '#ffffff';
                    var stars = '';
                    for (let j = 1; j <= 5; j++) {
                        if (j <= rating) {
                            stars += '<span class="text-warning">&#9733;</span>';
                        } else {
                            stars += '<span class="text-warning">&#9734;</span>';
                        }
                    }
                    container.innerHTML += `
                            <div class="col mb-5">
                    <div class="card h-100">
                        <div class="card-img-container" style="height: 200px;background-color: ` + bgColor + `; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                            <img class="card-img-top img-fluid" src="` + imageUrl + `" alt="` + category[i].id + `" onerror="this.onerror=null;this.src='images/default.jpg';" style="height: 100%; width: auto; object-fit: contain;" />
                        </div>
                        <div class="card-body p-4 text-center">
                            <h5 class="fw-bolder">` + category[i].title + `</h5>
                            <p> $` + category[i].price + `</p>
                        </div>
                        <div class="card-footer p-4 bg-transparent border-top-0 text-center">
                            <a class="btn btn-dark mt-auto" href="product.html?id=` + category[i].id + `">Quick View</a>
                        </div>
                        <div class="card-header text-center">
                             <div class="star-rating">
                              ${stars}
                            </div>
                         </div>
                    </div>
                </div>`;
                }
            } catch (error) {
                console.error('Error fetching products:', error);
            }
        }

        async function fetchProducts() {
            let products;

            try {
                const res = await fetch('https://dummyjson.com/products');
                const data = await res.json();
                products = data.products;
                products = shuffleArray(products);
                console.log(products);


                for (var i = 0; i < products.length; i++) {
                    var imageUrl = products[i].images.length > 0 ? products[i].images[0] : 'images/default.jpg';
                    var rating = Math.round(products[i].rating);
                    var container = document.getElementById("con1");
                    const bgColor = categoryColors[products[i].category] || '#ffffff';
                    var stars = '';
                    for (let j = 1; j <= 5; j++) {
                        if (j <= rating) {
                            stars += '<span class="text-warning">&#9733;</span>';
                        } else {
                            stars += '<span class="text-warning">&#9734;</span>';
                        }
                    }
                    document.getElementById("related").innerHTML = `${products[i].category}`;
                    container.innerHTML += `
                        <div class="col mb-5 col sm-12">
                            <div class="card h-100 position-relative" >
                                <div class="card-img-container" style="height: 200px; background-color: ` + bgColor + `; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                                    <img class="card-img-top img-fluid" src="` + imageUrl + `" alt="` + products[i].id + `" onerror="this.onerror=null;this.src='images/default.jpg';" style="height: 100%; width: auto; object-fit: contain;" />
                                </div>
                                <div class="card-body p-4 text-center">
                                    <h5 class="fw-bolder">` + products[i].title + `</h5>
                                    <p> $` + products[i].price + `</p>
                                </div>
                                <div class="card-footer p-4 bg-transparent border-top-0 text-center">
                                    <a class="btn btn-dark mt-auto" href="product.html?id=` + products[i].id + `">Quick View</a>
                                </div>
                                <div class="card-header text-center">
                                    <div class="star-rating">
                                        ${stars}
                                    </div>
                                </div>
                            </div>
                        </div>`;
                }
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }


        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }
        fetchProducts();
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const itemCount = cart.reduce((total, item) => total + item.quantity, 0);
            document.querySelector('.badge').textContent = itemCount;
        }

       
    
        updateCartCount();

        window.history.scrollRestoration = 'manual';
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
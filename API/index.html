<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>CHANCHAN Shop</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <link href="style.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-lg my-4">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand text-black fw-bold" href="../index.html">CHANCHAN SARI- SARI STORE</a>
            <div class="d-flex w-100 align-items-center">
                <form class="d-flex me-2 position-relative w-100" role="search" id="searchForm">
                    <input class="form-control w-100" type="search" id="search" placeholder="Search" aria-label="Search"
                        oninput="getProd()">
                    <div id="suggestions" class="dropdown-menu" style="display: none;"></div>
                </form>
                <a href="cart.html">
                    <button class="btn btn-outline-dark d-flex align-items-center" type="button">
                        <i class="bi bi-cart3"></i>
                        <span class="badge bg-dark text-white ms-1 rounded-pill">0</span>
                    </button>
                </a>
            </div>
        </div>
    </nav>


    <div class="container-fluid py-2">
        <div class="d-flex justify-content-center">
            <ul class="nav bottom-links" id="categoryNav">
                <li class="nav-item"><a class="nav-link active text-black" href="#" onclick="fetchProducts();"
                        data-value="all">All Products</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="smartphones">Tech Gadgets</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="mens-shirts">Men</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="womens-dresses">Women</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="skin-care">Skin Care</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="sports-accessories">Sports Accessories</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="laptops">Laptop</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="womens-shoes">Women's Footwear</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="mens-shoes">Men's Shoes</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#" onclick="change(event);"
                        data-value="womens-jewellery">Accessories</a></li>
            </ul>
        </div>
    </div>
    <!-- Header-->

    <!-- Section-->
    <section class="">
        <div class="container px-4 px-lg-5 mt-2">
            <h2 class="fw-bolder mb-4" id="related" style="text-transform: capitalize;">Related products</h2>

            <div class="row  gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center" id="con1">


            </div>
        </div>
    </section>

    <footer class="footer position-relative light-background">

        <div class="container footer-top">
            <div class="row gy-4">
                <div class="col-lg-5 col-md-12 footer-about">
                    <a href="index.html" class="logo d-flex align-items-center">
                        <span class="sitename">CHANCHAN</span>
                    </a>
                    <p>Explore our collection and enjoy exclusive offers on quality products. Stay connected with us for updates and support.</p>
                    <div class="social-links d-flex mt-4">
                        <a href="https://twitter.com" target="_blank"><i class="bi bi-twitter"></i></a>
                        <a href="https://facebook.com" target="_blank"><i class="bi bi-facebook"></i></a>
                        <a href="https://instagram.com" target="_blank"><i class="bi bi-instagram"></i></a>
                        <a href="https://linkedin.com" target="_blank"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Discover Italy</a></li>
                        <li><a href="#">Travel Guides</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Our Services</h4>
                    <ul>
                        <li><a href="#">Travel Planning</a></li>
                        <li><a href="#">Culinary Tours</a></li>
                        <li><a href="#">Cultural Experiences</a></li>
                        <li><a href="#">Accommodation Booking</a></li>
                        <li><a href="#">Guided Tours</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
                    <h4>Contact Us</h4>
                    <p>Piazza di Spagna, 1</p>
                    <p>Rome, RM 00187</p>
                    <p>Italy</p>
                    <p class="mt-4"><strong>Phone:</strong> <span>+39 06 12345678</span></p>
                    <p><strong>Email:</strong> <span>info@italytravel.com</span></p>
                </div>

            </div>
        </div>

        <div class="container copyright text-center mt-4">
            <p>Â© <span>Copyright</span> <strong class="sitename">CHANCHAN</strong> <span>All Rights Reserved</span>
            </p>
            <div class="credits">
                Designed by <a href="https://www.facebook.com/tiantiannzz">CHANCHAN</a>
            </div>
        </div>

    </footer>
    <!-- Start of Async Drift Code -->
<script>
    "use strict";
    
    !function() {
      var t = window.driftt = window.drift = window.driftt || [];
      if (!t.init) {
        if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));
        t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
        t.factory = function(e) {
          return function() {
            var n = Array.prototype.slice.call(arguments);
            return n.unshift(e), t.push(n), t;
          };
        }, t.methods.forEach(function(e) {
          t[e] = t.factory(e);
        }), t.load = function(t) {
          var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
          o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
          var i = document.getElementsByTagName("script")[0];
          i.parentNode.insertBefore(o, i);
        };
      }
    }();
    drift.SNIPPET_VERSION = '0.3.1';
    drift.load('k85gzx2u2rr4');
    </script>
    <!-- End of Async Drift Code -->
    <script>
        const categoryColors = {
            "beauty": "#FFEBEE",
            "fragrances": "#FFEFD5",
            "furniture": "#D2B48C",
            "groceries": "#98FB98",
            "home-decoration": "#DEB887",
            "kitchen-accessories": "#FFF8DC",
            "laptops": "#B0C4DE",
            "mens-shirts": "#ADD8E6",
            "mens-shoes": "#B0E0E6",
            "mens-watches": "#C0C0C0",
            "mobile-accessories": "#D8BFD8",
            "motorcycle": "#A9A9A9",
            "skin-care": "#FFEBCD",
            "smartphones": "#B3D9FF",
            "sports-accessories": "#FFD1C1",
            "sunglasses": "#B0C4DE",
            "tablets": "#AFEEEE",
            "tops": "#FFA07A",
            "vehicle": "#D3D3D3",
            "womens-bags": "#FFC0CB",
            "womens-dresses": "#FFB6C1",
            "womens-jewellery": "#FAFAD2",
            "womens-shoes": "#CD5C5C",
            "womens-watches": "#FFFACD"
        };

        //taenang search
        const getProd = async () => {
            var search = document.getElementById("search").value;

            try {
                var response = await fetch('https://dummyjson.com/products/search?q=' + search);
                var data = await response.json();


                var container = document.getElementById("con1");
                container.innerHTML = '';

                if (data.products && data.products.length > 0) {
                    for (var i = 0; i < data.products.length; i++) {
                        var imageUrl = data.products[i].images.length > 0 ? data.products[i].images[0] : 'images/default.jpg';
                        var rating = Math.round(data.products[i].rating);
                        const reviewCount = data.products.reviews ? data.products.reviews.length : Math.floor(Math.random() * 500);
                        const bgColor = categoryColors[data.products[i].category] || '#ffffff';
                        var stars = '';
                        for (let j = 1; j <= 5; j++) {
                            if (j <= rating) {
                                stars += '<span class="text-warning">&#9733;</span>';
                            } else {
                                stars += '<span class="text-warning">&#9734;</span>';
                            }
                        }
                        document.getElementById("related").innerHTML = `${data.products[i].category}`;
                        container.innerHTML += `
                            <div class="col-12 col-sm-6 col-md-4 mb-4">
                                <div class="card border-0 position-relative product-card">
                                    <div class="position-relative overflow-hidden">
                                    <img src="` + imageUrl + `" class="card-img-top img-fluid" alt="Product Image" style="object-fit: contain; width: 100%; max-height: 300px;background-color: ` + bgColor + `;">
                                   <span class="badge bg-danger position-absolute top-0 start-0 m-2">
                                        ` + Math.round(data.products[i].discountPercentage) + `% off
                                    </span>
                                    </div>
                                    <div class="card-body">
                                    <p class="text-uppercase text-muted small mb-1">` + data.products[i].category + `</p>
                                    <h5 class="card-title fw-bold mb-1">` + data.products[i].title + `</h5>
                                  
                                    <div class="d-flex align-items-center">
                                        <span class="text-decoration-line-through text-muted me-2">$` + data.products[i].price + `</span>
                                        <span class="text-warning fw-bold">$` + (data.products[i].price * (1 - data.products[i].discountPercentage / 100)).toFixed(2) + `</span>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center mt-1">
                                         <div class="star-rating">
                                        ${stars}
                                    </div>
                                    <div class="d-flex justify-content-end mt-1">
                                        <a href="#" class="text-muted me-3"><i class="bi bi-heart"></i></a>
                                        <a href="product.html?id=` + data.products[i].id + `"class="text-muted"><i class="bi bi-cart"></i></a>
                                    </div>
                                </div>
                                    </div>
                                </div>
                                </div>
                            </div>`;
                    }
                } else {
                    container.innerHTML = "<p>No search results found</p>";
                }
            } catch (error) {
                console.error('Error fetching products:', error);
                container.innerHTML = "<p>Error fetching products. Please try again later.</p>";
            }
        };

            // eto ung sa navbar
        async function change(event) {
            if (!event || !event.target) {
                console.error('Event or target not available');
                return;
            }

            document.querySelectorAll('#categoryNav .nav-link').forEach(link => {
                link.classList.remove('active');
            });


            event.target.classList.add('active');

            var drop = event.target.getAttribute('data-value');
            let category;

            try {
                const res = await fetch('https://dummyjson.com/products/category/' + drop);
                const data = await res.json();
                category = data.products;

                console.log(category);

                document.getElementById("related").innerHTML = `${drop}`;
                var container = document.getElementById("con1");

                container.innerHTML = '';



                for (var i = 0; i < category.length; i++) {
                    var imageUrl = category[i].images.length > 0 ? category[i].images[0] : 'images/default.jpg';
                    var rating = Math.round(data.products[i].rating);
                    const reviewCount = category.reviews ? category.reviews.length : Math.floor(Math.random() * 500);
                    const bgColor = categoryColors[data.products[i].category] || '#ffffff';

                    var stars = '';
                    for (let j = 1; j <= 5; j++) {
                        if (j <= rating) {
                            stars += '<span class="text-warning">&#9733;</span>';
                        } else {
                            stars += '<span class="text-warning">&#9734;</span>';
                        }
                    }
                    container.innerHTML += `
                            <div class="col-12 col-sm-6 col-md-4 mb-4">
                                <div class="card border-0 position-relative product-card">
                                    <div class="position-relative overflow-hidden">
                                    <img src="` + imageUrl + `" class="card-img-top img-fluid" alt="Product Image" style="object-fit: contain; width: 100%; max-height: 300px;  background-color: ` + bgColor + `;">
                                  <span class="badge bg-danger position-absolute top-0 start-0 m-2">
                                        ` + Math.round(category[i].discountPercentage) + `% off
                                    </span>
                                    </div>
                                    <div class="card-body">
                                    <p class="text-uppercase text-muted small mb-1">` + category[i].category + `</p>
                                    <h5 class="card-title fw-bold mb-1">` + category[i].title + `</h5>
                                
                                    <div class="d-flex align-items-center">
                                        <span class="text-decoration-line-through text-muted me-2">$` + category[i].price + `</span>
                                       <span class="text-warning fw-bold">$` + (category[i].price * (1 - category[i].discountPercentage / 100)).toFixed(2) + `</span>
                                    </div>
                                   <div class="d-flex justify-content-between align-items-center mt-1">
                                         <div class="star-rating">
                                        ${stars}
                                    </div>
                                    <div class="d-flex justify-content-end mt-1">
                                        <a href="#" class="text-muted me-3"><i class="bi bi-heart"></i></a>
                                        <a href="product.html?id=` + category[i].id + `"class="text-muted"><i class="bi bi-cart"></i></a>
                                    </div>
                                    </div>
                                </div>
                                </div>
                            </div>`;
                }
            } catch (error) {
                console.error('Error fetching products:', error);
            }
        }
        // pagkuha ng mga items 

        async function fetchProducts() {
            let products;

            try {
                const res = await fetch('https://dummyjson.com/products');
                const data = await res.json();
                products = data.products;
                products = shuffleArray(products);
                console.log(products);


                for (var i = 0; i < products.length; i++) {
                    var imageUrl = products[i].images.length > 0 ? products[i].images[0] : 'images/default.jpg';
                    var rating = Math.round(products[i].rating);
                    var container = document.getElementById("con1");
                    const reviewCount = products.reviews ? products.reviews.length : Math.floor(Math.random() * 500);
                    const bgColor = categoryColors[products[i].category] || '#ffffff';
                    var stars = '';
                    for (let j = 1; j <= 5; j++) {
                        if (j <= rating) {
                            stars += '<span class="text-warning">&#9733;</span>';
                        } else {
                            stars += '<span class="text-warning">&#9734;</span>';
                        }
                    }
                    document.getElementById("related").innerHTML = `Products`;
                    container.innerHTML += `
                            <div class="col-12 col-sm-6 col-md-4 mb-4">
                                <div class="card border-0 position-relative product-card">
                                    <div class="position-relative overflow-hidden">
                                    <img src="` + imageUrl + `" class="card-img-top img-fluid" alt="Product Image" style="object-fit: contain; width: 100%; max-height: 300px; background-color: ` + bgColor + `;">
                                    <span class="badge bg-danger position-absolute top-0 start-0 m-2">
                                        ` + Math.round(products[i].discountPercentage) + `% off
                                    </span>
                                    </div>
                                    <div class="card-body">
                                    <p class="text-uppercase text-muted small mb-1">` + products[i].category + `</p>
                                    <h5 class="card-title fw-bold mb-1">` + products[i].title + `</h5>
                                    
                                    <div class="d-flex align-items-center">
                                        <span class="text-decoration-line-through text-muted me-2">$` + products[i].price + `</span>
                                       <span class="text-warning fw-bold">$` + (products[i].price * (1 - products[i].discountPercentage / 100)).toFixed(2) + `</span>
                                    </div>
                                   <div class="d-flex justify-content-between align-items-center mt-1">
                                         <div class="star-rating">
                                        ${stars}
                                    </div>
                                    <div class="d-flex justify-content-end mt-1">
                                        <a href="#" class="text-muted me-3"><i class="bi bi-heart"></i></a>
                                        <a href="product.html?id=` + products[i].id + `"class="text-muted"><i class="bi bi-cart"></i></a>
                                    </div>
                                    </div>
                                </div>
                                </div>
                            </div>`;
                }
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }


        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        fetchProducts();

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const itemCount = cart.reduce((total, item) => total + item.quantity, 0);
            document.querySelector('.badge').textContent = itemCount;
        }



        updateCartCount();

        window.history.scrollRestoration = 'manual';
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>